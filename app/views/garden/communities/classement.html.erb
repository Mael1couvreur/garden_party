<% content_for :meta_title, "Classement" %>
<% content_for :meta_description, "Classement général" %>
<%# <% content_for :meta_image, cl_image_path(@garden.photo.path) %>

<div class="top-page-header">
  <h1>Classement général</h1>
  <%= cl_image_tag current_user.photo.key, class: "avatar-bordered avatar-top-right" %>
</div>

<% podium = [] %>
<% @order.each do |position| %>
    <% user = User.find(position.id) %>
  <div class="ranking">
    <p id="position"><% podium << @order.index(user) + 1 %></p>
    <p id="name"> <% podium << user.first_name %></p>
    <p id="score"><% podium << user.score %> points</p>
  </div>
  <% end %>
  <%# <%= podium.limit(3) %>  


<img src="https://www.pngitem.com/pimgs/m/47-475004_podium-clipart-award-winning-transparent-background-podium-png.png">

<div class="container-ranking">
  <div class="ranking">
    <p class="headers">Rang</p>
    <p class="headers">Gardeneur</p>
    <p class="headers">Score</p>
  </div>

  <%# Affiche les scores  %>
  <%# @order vient du controller. Array contennant des instances de user dans l'order asc des scores %>
  <% @order.each do |position| %>
    <% user = User.find(position.id) %>
  <div class="ranking">
    <p id="position"><%= @order.index(user) + 1 %></p>
    <p id="name"> <%= user.first_name %></p>
    <p id="score"><%= user.score %> points</p>
  </div>
  <% end %>

  <% if false %>
  <h1 id="header">Ta position</h1>
    <div class="ranking">
      <p class="headers">Rang</p>
      <p class="headers">Gardeneur</p>
      <p class="headers">Score</p>
    </div>

    <div class="ranking">
      <p id="position"><%= @order.index(current_user) + 1 %></p>
      <p id="name"> <%= @order.find(current_user.id).first_name %></p>
      <p id="score"><%= @order.find(current_user.id).score %> points</p>
    </div>
    <% end %>

</div>
